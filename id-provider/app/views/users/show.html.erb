<!DOCTYPE html>
<html>
  <head>
    <title>ユーザー情報</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <style>
      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        max-width: 600px;
        margin: 100px auto;
        padding: 20px;
        background-color: #f5f5f5;
      }
      .container {
        background: white;
        padding: 30px;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      }
      h1 {
        margin-top: 0;
        color: #333;
        border-bottom: 2px solid #2196F3;
        padding-bottom: 10px;
      }
      .info-section {
        margin: 25px 0;
      }
      .info-row {
        display: flex;
        padding: 12px 0;
        border-bottom: 1px solid #eee;
      }
      .info-row:last-child {
        border-bottom: none;
      }
      .info-label {
        font-weight: 500;
        color: #555;
        width: 180px;
        flex-shrink: 0;
      }
      .info-value {
        color: #333;
        word-break: break-all;
      }
      .badge {
        display: inline-block;
        padding: 4px 12px;
        border-radius: 12px;
        font-size: 14px;
        font-weight: 500;
      }
      .badge-verified {
        background: #e8f5e9;
        color: #2e7d32;
      }
      .badge-unverified {
        background: #fff3e0;
        color: #f57c00;
      }
      .actions {
        margin-top: 30px;
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
      }
      .btn {
        padding: 10px 20px;
        border-radius: 4px;
        text-decoration: none;
        font-size: 14px;
        font-weight: 500;
        border: none;
        cursor: pointer;
        display: inline-block;
        text-align: center;
      }
      .btn-primary {
        background: #2196F3;
        color: white;
      }
      .btn-primary:hover {
        background: #1976D2;
      }
      .btn-danger {
        background: #f44336;
        color: white;
      }
      .btn-danger:hover {
        background: #d32f2f;
      }
      .notice {
        padding: 10px;
        margin-bottom: 20px;
        border-radius: 4px;
        background: #e8f5e9;
        color: #2e7d32;
      }
      .empty-value {
        color: #999;
        font-style: italic;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>ユーザー情報</h1>

      <% if flash[:notice] %>
        <div class="notice"><%= flash[:notice] %></div>
      <% end %>

      <div class="info-section">
        <div class="info-row">
          <div class="info-label">メールアドレス</div>
          <div class="info-value"><%= @user.email %></div>
        </div>

        <div class="info-row">
          <div class="info-label">メール認証状態</div>
          <div class="info-value">
            <% if @user.email_verified %>
              <span class="badge badge-verified">認証済み</span>
            <% else %>
              <span class="badge badge-unverified">未認証</span>
            <% end %>
          </div>
        </div>

        <div class="info-row">
          <div class="info-label">名前</div>
          <div class="info-value">
            <%= @user.name.present? ? @user.name : content_tag(:span, '未設定', class: 'empty-value') %>
          </div>
        </div>

        <div class="info-row">
          <div class="info-label">姓</div>
          <div class="info-value">
            <%= @user.family_name.present? ? @user.family_name : content_tag(:span, '未設定', class: 'empty-value') %>
          </div>
        </div>

        <div class="info-row">
          <div class="info-label">名</div>
          <div class="info-value">
            <%= @user.given_name.present? ? @user.given_name : content_tag(:span, '未設定', class: 'empty-value') %>
          </div>
        </div>

        <div class="info-row">
          <div class="info-label">Subject ID (sub)</div>
          <div class="info-value"><code><%= @user.sub %></code></div>
        </div>

        <div class="info-row">
          <div class="info-label">登録日時</div>
          <div class="info-value"><%= l @user.created_at, format: :long %></div>
        </div>
      </div>

      <div class="actions">
        <%= button_to "ログアウト", logout_path, method: :post, class: "btn btn-danger", data: { confirm: 'ログアウトしますか？' } %>
      </div>
    </div>
  </body>
</html>
